<Files ".ht">
	Order deny,allow
	Deny from all
</Files>
RewriteEngine  On

## requests generated by controller are rewritten to engine, that's it (regardless of the file's existance)
RewriteCond %{REQUEST_URI} ^/index\.(xml|php|html|xhtml)$
RewriteRule .* index.php [L]
RewriteCond %{REQUEST_URI} ^/(.+?)\.(xml|php|html|xhtml)$
RewriteRule .* index.php?%1 [L]

## requests not matching our specific rules are rewritten and therefore blocked
RewriteCond %{REQUEST_URI} !^/img/([\w-]+/)*[\w-]+\.(jpg|jpeg|png|ico|svg|gif|tiff)$
RewriteCond %{REQUEST_URI} !^/js/[\w-]+\.js$
RewriteCond %{REQUEST_URI} !^/templates/[\w-]+\.tpl$
RewriteCond %{REQUEST_URI} !^/css/[\w-]+\.css$
RewriteCond %{REQUEST_URI} !^/doc/([\w-]+)?$
# RewriteCond %{REQUEST_URI} !^/pub ## pub dir, if needed (warning, all extensions are allowed, also PHP code)
RewriteCond %{REQUEST_URI} !^/favicon\.(ico|png)$
RewriteCond %{REQUEST_URI} !^/$
RewriteRule .* .htvrequestmodified
